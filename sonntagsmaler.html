<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wort-Maler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .game-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%);
            backdrop-filter: blur(10px);
        }
        
        .drawing-canvas {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .drawing-path {
            stroke: #3b82f6;
            stroke-width: 3;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
        }
        
        .draw-animation {
            animation: drawPath 3s ease-out forwards;
        }
        
        @keyframes drawPath {
            to {
                stroke-dashoffset: 0;
            }
        }
        
        .guess-input {
            border: 3px solid #3b82f6;
            transition: all 0.3s ease;
        }
        
        .guess-input:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
            transform: scale(1.02);
        }
        
        .score-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #10b981;
            animation: scorePopup 1.5s ease-out forwards;
            pointer-events: none;
            z-index: 30;
        }
        
        @keyframes scorePopup {
            0% { 
                transform: translate(-50%, -50%) scale(0.5); 
                opacity: 0; 
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.2); 
                opacity: 1; 
            }
            100% { 
                transform: translate(-50%, -50%) scale(1) translateY(-30px); 
                opacity: 0; 
            }
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .trophy-gold { color: #FFD700; }
        .trophy-silver { color: #C0C0C0; }
        .trophy-bronze { color: #CD7F32; }
        
        .celebration {
            animation: celebrate 0.8s ease-out;
        }
        
        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .hint-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%);
            border: 2px solid #f59e0b;
            animation: hintPulse 0.5s ease-out;
        }
        
        @keyframes hintPulse {
            0% { transform: scale(0.9); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .word-category {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            border: 1px solid #a5b4fc;
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-6">
            <div class="flex items-center justify-center gap-4 mb-4">
                <button onclick="goHome()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-all duration-300 backdrop-blur-sm">
                    ‚Üê Zur√ºck zur Startseite
                </button>
                <h1 class="text-4xl font-bold text-white drop-shadow-lg">
                    üé® Wort-Maler
                </h1>
            </div>
            <p class="text-white/90 text-lg">Rate das englische Wort w√§hrend es gezeichnet wird!</p>
        </div>

        <!-- Game Stats -->
        <div class="flex justify-center gap-4 mb-6">
            <div class="game-card px-4 py-2 rounded-lg shadow-lg">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-600" id="score">0</div>
                    <div class="text-sm text-gray-600">Punkte</div>
                </div>
            </div>
            
            <div class="game-card px-4 py-2 rounded-lg shadow-lg">
                <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600" id="wordCount">0/10</div>
                    <div class="text-sm text-gray-600">W√∂rter</div>
                </div>
            </div>
            
            <div class="game-card px-4 py-2 rounded-lg shadow-lg">
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600" id="timeBonus">100%</div>
                    <div class="text-sm text-gray-600">Zeit-Bonus</div>
                </div>
            </div>
            
            <div class="game-card px-4 py-2 rounded-lg shadow-lg">
                <div class="text-center">
                    <div class="text-2xl font-bold text-orange-600" id="hintsLeft">3</div>
                    <div class="text-sm text-gray-600">Hints</div>
                </div>
            </div>
        </div>

        <!-- Game Controls -->
        <div class="flex justify-center gap-4 mb-6">
            <button id="startBtn" onclick="startGame()" class="bg-indigo-500 hover:bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg">
                üéÆ Spiel starten
            </button>
            
            <button id="hintBtn" onclick="useHint()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg hidden">
                üí° Hint verwenden
            </button>
            
            <button id="skipBtn" onclick="skipWord()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 transform hover:scale-105 shadow-lg hidden">
                ‚è≠Ô∏è √úberspringen
            </button>
        </div>

        <!-- Progress Bar -->
        <div id="progressContainer" class="game-card rounded-xl p-4 shadow-lg mb-6 hidden">
            <div class="flex justify-between items-center mb-2">
                <span class="text-gray-700 font-medium">Fortschritt</span>
                <span id="progressText" class="text-gray-700 font-bold">0 / 10</span>
            </div>
            <div class="bg-gray-200 rounded-full h-3">
                <div id="progressBar" class="progress-bar bg-indigo-500 h-3 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <!-- Game Area -->
        <div id="gameArea" class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6 hidden">
            <!-- Drawing Canvas -->
            <div class="game-card rounded-xl p-6 shadow-lg">
                <div class="text-center mb-4">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Zeichnung</h3>
                    <div class="word-category px-3 py-1 rounded-full text-sm font-medium text-indigo-700 inline-block mb-4" id="categoryHint">
                        Kategorie: ?
                    </div>
                </div>
                
                <div class="flex justify-center">
                    <svg id="drawingCanvas" class="drawing-canvas" width="300" height="300" viewBox="0 0 300 300">
                        <!-- Zeichnungen werden hier eingef√ºgt -->
                    </svg>
                </div>
                
                <div class="mt-4 text-center">
                    <div class="text-sm text-gray-600">
                        Zeichnung wird in <span id="drawingProgress" class="font-bold">0%</span> vervollst√§ndigt
                    </div>
                </div>
            </div>

            <!-- Guess Area -->
            <div class="game-card rounded-xl p-6 shadow-lg">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Deine Vermutung</h3>
                    <div class="space-y-4">
                        <input 
                            type="text" 
                            id="guessInput" 
                            class="guess-input w-full px-6 py-4 rounded-lg text-xl text-center font-bold outline-none"
                            placeholder="Englisches Wort eingeben..."
                            autocomplete="off"
                        >
                        <button onclick="submitGuess()" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-bold transition-all duration-300 transform hover:scale-105">
                            ‚úì Raten
                        </button>
                    </div>
                </div>
                
                <div id="hintArea" class="hidden">
                    <div class="hint-box p-4 rounded-lg text-center">
                        <div class="font-bold text-yellow-800 mb-2">üí° Hint</div>
                        <div id="hintText" class="text-yellow-700"></div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <div class="text-center">
                        <div class="text-sm text-gray-600 mb-2">Zeit-Bonus</div>
                        <div class="bg-gray-200 rounded-full h-2">
                            <div id="timeBonusBar" class="bg-green-500 h-2 rounded-full transition-all duration-1000" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="game-card rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-center mb-6 text-gray-800 flex items-center justify-center gap-2">
                üèÜ Bestenliste - Top 10
            </h2>
            <div id="leaderboard" class="space-y-2">
                <!-- Wird per JavaScript geladen -->
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="game-card p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4 celebration">
            <div class="text-center">
                <div class="text-6xl mb-4">üé®</div>
                <h3 class="text-3xl font-bold text-indigo-600 mb-4">Spiel beendet!</h3>
                <p class="text-gray-700 mb-2">Deine Punktzahl: <span id="finalScore" class="font-bold text-indigo-600"></span></p>
                <p class="text-gray-700 mb-4">Richtige W√∂rter: <span id="finalWords" class="font-bold text-green-600"></span>/10</p>
                
                <input type="text" id="playerName" placeholder="Dein Name f√ºr die Bestenliste" 
                       class="w-full p-3 border border-gray-300 rounded-lg mb-4 text-center" maxLength="20">
                
                <div class="flex gap-3">
                    <button onclick="saveScore()" class="flex-1 bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-lg font-bold transition-colors">
                        üíæ Speichern
                    </button>
                    <button onclick="closeModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-bold transition-colors">
                        ‚ùå √úberspringen
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Zeichnungen f√ºr verschiedene W√∂rter
        const drawings = {
            'SHOES': {
                paths: [
                    // Linker Schuh - Grundform
                    'M80,180 Q60,160 60,140 Q60,120 80,110 Q120,100 160,110 Q180,120 180,140 Q180,160 160,180 L80,180 Z',
                    // Linker Schuh - Sohle
                    'M70,180 Q50,190 50,200 Q50,210 70,220 L170,220 Q190,210 190,200 Q190,190 170,180',
                    // Linker Schuh - Zunge
                    'M100,110 Q120,100 140,110 L140,140 Q120,150 100,140 Z',
                    // Linker Schuh - Schn√ºrsenkel horizontal
                    'M90,120 L150,120 M90,130 L150,130 M90,140 L150,140 M90,150 L150,150',
                    // Linker Schuh - Schn√ºrsenkel √ñsen
                    'M85,120 A3,3 0 1,1 85,119 M155,120 A3,3 0 1,1 155,119',
                    'M85,130 A3,3 0 1,1 85,129 M155,130 A3,3 0 1,1 155,129',
                    'M85,140 A3,3 0 1,1 85,139 M155,140 A3,3 0 1,1 155,139',
                    'M85,150 A3,3 0 1,1 85,149 M155,150 A3,3 0 1,1 155,149',
                    
                    // Rechter Schuh - Grundform
                    'M220,160 Q200,140 200,120 Q200,100 220,90 Q260,80 300,90 Q320,100 320,120 Q320,140 300,160 L220,160 Z',
                    // Rechter Schuh - Sohle  
                    'M210,160 Q190,170 190,180 Q190,190 210,200 L310,200 Q330,190 330,180 Q330,170 310,160',
                    // Rechter Schuh - Zunge
                    'M240,90 Q260,80 280,90 L280,120 Q260,130 240,120 Z',
                    // Rechter Schuh - Schn√ºrsenkel horizontal
                    'M230,100 L290,100 M230,110 L290,110 M230,120 L290,120 M230,130 L290,130',
                    // Rechter Schuh - Schn√ºrsenkel √ñsen
                    'M225,100 A3,3 0 1,1 225,99 M295,100 A3,3 0 1,1 295,99',
                    'M225,110 A3,3 0 1,1 225,109 M295,110 A3,3 0 1,1 295,109',
                    'M225,120 A3,3 0 1,1 225,119 M295,120 A3,3 0 1,1 295,119',
                    'M225,130 A3,3 0 1,1 225,129 M295,130 A3,3 0 1,1 295,129',
                    
                    // Schn√ºrsenkel-B√§nder
                    'M95,115 Q105,105 115,115 M145,115 Q135,105 125,115',
                    'M235,95 Q245,85 255,95 M285,95 Q275,85 265,95'
                ],
                category: 'Kleidung',
                hints: ['Du tr√§gst sie an den F√º√üen', 'Haben Schn√ºrsenkel', 'Sch√ºtzen beim Gehen']
            },
            'WATCH': {
                paths: [
                    // Uhrengeh√§use √§u√üerer Ring
                    'M150,150 A70,70 0 1,1 149,150',
                    // Uhrengeh√§use innerer Ring
                    'M150,150 A60,60 0 1,1 149,150',
                    // Zifferblatt
                    'M150,150 A50,50 0 1,1 149,150',
                    // Krone (Aufzieh-Knopf)
                    'M220,150 L240,150 Q245,145 245,150 Q245,155 240,150 Z',
                    'M240,145 L240,155',
                    // Oberes Armband
                    'M130,80 Q150,60 170,80 L170,100 Q150,90 130,100 Z',
                    'M125,80 L175,80 L175,100 L125,100',
                    // Unteres Armband  
                    'M130,200 Q150,220 170,200 L170,180 Q150,190 130,180 Z',
                    'M125,200 L175,200 L175,180 L125,180',
                    // Schnalle
                    'M140,70 L160,70 L160,85 L140,85 Z',
                    'M145,75 L155,75 L155,80 L145,80 Z',
                    // Ziffern 12, 3, 6, 9
                    'M150,110 L145,105 L145,115 M155,105 L155,115 L145,115', // 12
                    'M185,145 Q190,140 195,145 Q190,150 185,155', // 3
                    'M145,185 Q150,190 155,185 Q150,195 145,185', // 6
                    'M115,155 Q110,150 115,145 Q120,150 115,155', // 9
                    // Weitere Ziffern
                    'M170,125 L165,120 L175,135', // 1
                    'M175,165 Q180,160 180,170 Q175,175 170,170', // 2
                    'M170,175 Q175,180 175,170', // 4
                    'M135,185 Q130,180 135,175 Q140,180 135,185', // 5
                    'M125,175 Q120,170 125,165', // 7
                    'M125,135 Q120,130 125,125 Q130,130 125,135', // 8
                    'M130,125 L125,120 L135,135', // 10
                    'M135,115 L130,110 L140,125', // 11
                    // Uhrzeiger
                    'M150,150 L150,125', // Stundenzeiger (10 Uhr)
                    'M150,150 L165,140', // Minutenzeiger (2)
                    'M150,150 A2,2 0 1,1 149,150' // Mittelpunkt
                ],
                category: 'Accessoire',
                hints: ['Zeigt die Zeit an', 'Tr√§gst du am Handgelenk', 'Hat Zeiger und Zahlen']
            },
            'CAP': {
                paths: [
                    // Hauptform der Kappe
                    'M80,180 Q70,120 120,100 Q180,90 220,100 Q270,120 290,180 Q280,200 220,210 Q180,215 120,210 Q90,200 80,180 Z',
                    // Schirm der Kappe
                    'M60,200 Q100,220 150,215 Q200,220 240,200 Q280,210 320,200 Q300,230 240,240 Q180,245 150,240 Q120,245 60,230 Q40,210 60,200 Z',
                    // Schirm Unterseite
                    'M70,210 Q110,225 150,220 Q190,225 230,210 Q270,215 310,210',
                    // Kappe vorne - blauer Teil
                    'M120,180 Q140,130 180,120 Q220,130 240,180 L240,200 Q180,190 120,200 Z',
                    // Kappe hinten - roter Teil  
                    'M240,180 Q260,140 280,180 L280,200 Q260,205 240,200',
                    'M120,180 Q100,140 80,180 L80,200 Q100,205 120,200',
                    // Mittellinie der Kappe
                    'M180,95 Q180,130 180,180',
                    // Knopf oben
                    'M180,90 A8,8 0 1,1 179,90',
                    'M180,85 A3,3 0 1,1 179,85',
                    // Panel-Linien
                    'M120,100 Q150,95 180,95',
                    'M180,95 Q210,95 240,100',
                    'M240,100 Q265,110 280,140',
                    'M120,100 Q95,110 80,140',
                    // Schirm-Details
                    'M80,210 Q120,215 160,212 Q200,215 240,210',
                    'M90,220 Q130,223 170,220 Q210,223 250,220'
                ],
                category: 'Kleidung',
                hints: ['Kopfbedeckung', 'Hat einen Schirm vorne', 'Sch√ºtzt vor Sonne']
            }
        };

        // Spielvariablen
        let gameActive = false;
        let currentWord = null;
        let currentWordIndex = 0;
        let score = 0;
        let correctWords = 0;
        let hintsLeft = 3;
        let drawingProgress = 0;
        let timeBonus = 100;
        let drawingInterval = null;
        let bonusInterval = null;

        // Hilfsfunktionen
        function getRandomWord() {
            const words = Object.keys(drawings);
            return words[Math.floor(Math.random() * words.length)];
        }

        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('wordCount').textContent = `${correctWords}/10`;
            document.getElementById('timeBonus').textContent = timeBonus + '%';
            document.getElementById('hintsLeft').textContent = hintsLeft;
            document.getElementById('progressText').textContent = `${correctWords} / 10`;
            document.getElementById('progressBar').style.width = (correctWords / 10 * 100) + '%';
        }

        function showScorePopup(points) {
            const popup = document.createElement('div');
            popup.className = 'score-popup';
            popup.textContent = '+' + points + ' Punkte!';
            document.getElementById('gameArea').appendChild(popup);
            
            setTimeout(() => {
                if (popup.parentNode) {
                    popup.parentNode.removeChild(popup);
                }
            }, 1500);
        }

        // Navigation
        function goHome() {
            window.location.href = 'index.html';
        }

        // Spiel-Logik
        function startGame() {
            gameActive = true;
            currentWordIndex = 0;
            score = 0;
            correctWords = 0;
            hintsLeft = 3;
            
            document.getElementById('gameArea').classList.remove('hidden');
            document.getElementById('progressContainer').classList.remove('hidden');
            document.getElementById('hintBtn').classList.remove('hidden');
            document.getElementById('skipBtn').classList.remove('hidden');
            document.getElementById('startBtn').textContent = 'üîÑ Neues Spiel';
            
            updateDisplay();
            startNewWord();
        }

        function startNewWord() {
            if (currentWordIndex >= 10) {
                endGame();
                return;
            }

            currentWord = getRandomWord();
            drawingProgress = 0;
            timeBonus = 100;
            
            document.getElementById('categoryHint').textContent = `Kategorie: ${drawings[currentWord].category}`;
            document.getElementById('guessInput').value = '';
            document.getElementById('hintArea').classList.add('hidden');
            document.getElementById('drawingProgress').textContent = '0%';
            document.getElementById('timeBonusBar').style.width = '100%';
            
            clearCanvas();
            startDrawing();
            startBonusTimer();
            
            document.getElementById('guessInput').focus();
        }

        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            canvas.innerHTML = '';
        }

        function startDrawing() {
            const paths = drawings[currentWord].paths;
            let pathIndex = 0;
            
            function drawNextPath() {
                if (pathIndex >= paths.length || !gameActive) return;
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', paths[pathIndex]);
                path.setAttribute('class', 'drawing-path draw-animation');
                
                document.getElementById('drawingCanvas').appendChild(path);
                
                pathIndex++;
                drawingProgress = Math.round((pathIndex / paths.length) * 100);
                document.getElementById('drawingProgress').textContent = drawingProgress + '%';
                
                if (pathIndex < paths.length) {
                    setTimeout(drawNextPath, 3000);
                }
            }
            
            drawNextPath();
        }

        function startBonusTimer() {
            if (bonusInterval) clearInterval(bonusInterval);
            
            bonusInterval = setInterval(() => {
                if (!gameActive) return;
                
                timeBonus = Math.max(10, timeBonus - 2);
                document.getElementById('timeBonus').textContent = timeBonus + '%';
                document.getElementById('timeBonusBar').style.width = timeBonus + '%';
                
                if (timeBonus <= 50) {
                    document.getElementById('timeBonusBar').className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                }
                if (timeBonus <= 25) {
                    document.getElementById('timeBonusBar').className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                }
            }, 500);
        }

        function submitGuess() {
            const guess = document.getElementById('guessInput').value.trim().toUpperCase();
            if (!guess || !gameActive) return;
            
            if (guess === currentWord) {
                // Richtige Antwort
                const basePoints = 50;
                const bonusPoints = Math.round(basePoints * (timeBonus / 100));
                const totalPoints = basePoints + bonusPoints;
                
                score += totalPoints;
                correctWords++;
                currentWordIndex++;
                
                showScorePopup(totalPoints);
                updateDisplay();
                
                clearInterval(bonusInterval);
                
                setTimeout(() => {
                    startNewWord();
                }, 2000);
            } else {
                // Falsche Antwort
                document.getElementById('guessInput').style.borderColor = '#ef4444';
                document.getElementById('guessInput').style.animation = 'shake 0.5s ease-in-out';
                
                setTimeout(() => {
                    document.getElementById('guessInput').style.borderColor = '#3b82f6';
                    document.getElementById('guessInput').style.animation = '';
                    document.getElementById('guessInput').value = '';
                }, 1000);
            }
        }

        function useHint() {
            if (hintsLeft <= 0 || !currentWord) return;
            
            hintsLeft--;
            updateDisplay();
            
            const hints = drawings[currentWord].hints;
            const hintIndex = 3 - hintsLeft - 1;
            const hintText = hints[Math.min(hintIndex, hints.length - 1)];
            
            document.getElementById('hintText').textContent = hintText;
            document.getElementById('hintArea').classList.remove('hidden');
            
            if (hintsLeft === 0) {
                document.getElementById('hintBtn').disabled = true;
                document.getElementById('hintBtn').classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        function skipWord() {
            if (!gameActive) return;
            
            currentWordIndex++;
            clearInterval(bonusInterval);
            
            setTimeout(() => {
                startNewWord();
            }, 500);
        }

        function endGame() {
            gameActive = false;
            clearInterval(bonusInterval);
            
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalWords').textContent = correctWords;
            document.getElementById('successModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
            loadLeaderboard();
        }

        async function saveScore() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('Bitte gib deinen Namen ein!');
                return;
            }
            
            try {
                const scoreData = {
                    name: name,
                    score: score,
                    correctWords: correctWords,
                    timestamp: Date.now()
                };
                
                await fetch('https://wortartenspiele-default-rtdb.europe-west1.firebasedatabase.app/painter-leaderboard.json', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(scoreData)
                });
                
                closeModal();
                
            } catch (error) {
                console.error('Fehler beim Speichern:', error);
                alert('Fehler beim Speichern der Punktzahl!');
            }
        }

        async function loadLeaderboard() {
            try {
                const response = await fetch('https://wortartenspiele-default-rtdb.europe-west1.firebasedatabase.app/painter-leaderboard.json');
                if (response.ok) {
                    const data = await response.json();
                    if (data) {
                        const leaderboard = Object.values(data)
                            .sort((a, b) => b.score - a.score)
                            .slice(0, 10);
                        
                        displayLeaderboard(leaderboard);
                    }
                }
            } catch (error) {
                console.error('Fehler beim Laden der Bestenliste:', error);
            }
        }

        function displayLeaderboard(leaderboard) {
            const container = document.getElementById('leaderboard');
            
            if (leaderboard.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-8">Noch keine Eintr√§ge vorhanden</div>';
                return;
            }
            
            container.innerHTML = leaderboard.map((entry, index) => {
                let trophyIcon = '';
                let bgClass = 'bg-gray-50';
                
                if (index === 0) {
                    trophyIcon = '<span class="trophy-gold text-xl">ü•á</span>';
                    bgClass = 'bg-yellow-100 border-yellow-300 border-2';
                } else if (index === 1) {
                    trophyIcon = '<span class="trophy-silver text-xl">ü•à</span>';
                    bgClass = 'bg-gray-100 border-gray-300 border-2';
                } else if (index === 2) {
                    trophyIcon = '<span class="trophy-bronze text-xl">ü•â</span>';
                    bgClass = 'bg-orange-100 border-orange-300 border-2';
                }
                
                return `
                    <div class="flex justify-between items-center p-4 rounded-lg ${bgClass} transition-all duration-200 hover:transform hover:translate-x-2">
                        <div class="flex items-center gap-3">
                            ${trophyIcon || `<span class="font-bold text-gray-500 text-lg">#${index + 1}</span>`}
                            <span class="font-medium text-gray-800">${entry.name}</span>
                        </div>
                        <div class="text-right">
                            <div class="font-mono font-bold text-indigo-600 text-lg">${entry.score} Punkte</div>
                            <div class="text-sm text-gray-500">${entry.correctWords}/10 W√∂rter</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadLeaderboard();
            
            document.getElementById('guessInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    submitGuess();
                }
            });
        });

        // CSS f√ºr Shake-Animation hinzuf√ºgen
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
